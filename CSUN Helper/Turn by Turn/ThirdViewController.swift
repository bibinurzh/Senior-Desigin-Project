import UIKit

class ThirdViewController: UIViewController, UITableViewDelegate, UITableViewDataSource, UISearchBarDelegate{
    
    
    @IBOutlet weak var searchBar: UISearchBar!
    
    @IBOutlet weak var tblView: UITableView!
    
    let classData = ["0000", "0001", "0002", "0003", "0004", "1100", "1101", "1101A", "1101B", "1101C", "1101D", "1102", "1103", "1104", "1105", "1107", "1107A", "1108", "1109", "1109A", "1110", "1110A", "1101B", "1101C", "1111", "1112", "1113", "1115", "1116", "1116A", "1117", "1118", "1119", "1120", "1121", "1122", "1123", "1124", "1126", "1128", "1130", "1130A", "1132", "1134", "1501", "1501A", "1501B", "1501C", "1501D", "1501E", "1501F", "1501G", "1501H", "1502", "1503", "1504", "1504A", "1504B", "1504C", "1504D", "1504E", "1505", "1506", "1507", "1509", "1510", "1511", "1512", "1513A", "1513B", "1515", "1517", "1519", "1521", "1523", "1525", "1527", "1529", "1531", "1533", "1535", "1535A", "1535B", "1536", "1536A", "1537", "1537A", "1537B", "1537C", "1537D", "1537E", "1538", "1538A", "1538B", "1550", "1551", "1552", "1553", "1554", "1555", "1561", "1561A", "1562", "1563", "1564", "1565", "1565A", "1565B", "1565C", "1565D", "1565E", "1566", "1567", "1568", "1568A", "1568B", "1569", "1569A", "1570", "1571", "1572", "1572A", "1573", "1573A", "1574", "1576", "1577", "1577A", "1578", "1579", "1580", "1581", "1581A", "1581B", "1583", "1586", "1590", "1590A", "1590B", "1590C", "1591A", "1591B", "1592", "1593", "1600", "1600A", "1600B", "1601", "1602", "1603", "1604", "1604A", "1605", "1607", "1608", "1608A", "1609", "1610", "1611", "1612", "1613", "1615", "1615A", "1615B", "1616", "1618", "1621", "1622", "1622A", "1622B", "1622C", "1622D", "1623", "1624", "1624A", "1624B", "1624C", "1625", "1625A", "1626", "1627", "1801", "1801A", "1802", "2201", "2202", "2203", "2203A","2204", "2205", "2206", "2207", "2208", "2209", "2210", "2210A", "2210B", "2210C", "2211", "2211A",  "2212", "2213", "2214", "2215", "2216", "2217", "2217A", "2257", "2500", "2500A", "2500A", "2500B", "2500C", "2501", "2503", "2505", "2507", "2509", "2511", "2513", "2515", "2520", "2521","2521A", "2522", "2523", "2524", "2525", "2526", "2527", "2528", "2529", "2530", "2532", "2524", "2536", "2538", "2540", "2541", "2542", "2543", "2544", "2546", "2547", "2548", "2550", "2552", "2554", "2562", "2564", "2568", "2570", "3301", "3303", "3305", "3307", "3309","3310", "3311", "3312", "3313", "3314", "3315", "3317", "3319", "3321", "3323", "3325", "3327", "3329", "3331", "3332", "3333", "3334",  "3335", "3336", "3337", "3339", "3341", "3343", "3345", "3346", "3347", "3348", "3349", "3350", "3501", "3502", "3502A", "3503", "3505", "3507", "3508", "3509", "3510", "3511", "3513", "3514", "3515", "3516", "3517", "3519", "3520", "3521", "3523", "3524", "3525", "3527", "3529", "4401", "4403", "4405", "4406", "4407", "4409", "4411", "4413", "4414", "4415", "4416", "4417", "4419", "4421", "4423", "4425", "4427", "4429", "4431", "4432", "4433", "4434", "4435", "4437", "4439", "4440", "4441", "4442", "4443", "4444", "4445", "4446", "4447", "4448", "4449", "4501", "4502", "4503", "4503A", "4503B", "4504", "4504A", "4504B", "4504C", "4504D", "4504E", "4504G", "4505", "4507", "4507A", "4507B", "4508", "4508A", "4508B", "4508C", "4508D", "4509", "4509A", "4509B", "4510", "4510A", "4511", "4512", "4513", "4513A", "4513B", "4514", "4515", "4516", "4519", "4557"]
    
    
    var searchClass = [String]()
    
    var searching = false
    
    override func viewDidLoad() {
        super.viewDidLoad()
        
    }
    
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        if searching {
            return searchClass.count
        }
        else {
            
        return classData.count
        }
    }
    
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = tblView.dequeueReusableCell(withIdentifier: "cell")
        if searching {
            cell?.textLabel?.text = searchClass[indexPath.row]
        }
        else{
            cell?.textLabel?.text = classData[indexPath.row]
        }
        return cell!
        
    }
    
    
    func searchBar(_ searchBar: UISearchBar, textDidChange searchText: String) {
        //Matches the ongoing search input with data
        searchClass = classData.filter({$0.lowercased().prefix(searchText.count) == searchText.lowercased()})
        searching = true
        tblView.reloadData()
        
    }
    
    func searchBarCancelButtonClicked(_ searchBar: UISearchBar) {
        searching = false
        searchBar.text = ""
        tblView.reloadData()
        
    }
    
    
    
}
